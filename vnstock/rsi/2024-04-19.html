<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scatter Chart with Movement Indicators</title>
  <link rel="stylesheet" href="https://unpkg.com/vue-select@3.11.2/dist/vue-select.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
    }

    #app {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      max-width: 1300px;
      margin: 20px auto;
    }

    canvas {
      margin-top: 20px;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }

    button:hover {
      background-color: #0056b3;
    }

    p {
      color: #666;
      font-size: 14px;
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue-select@3.11.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>

<div id="app">
  <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="#">Chứng khoán Việt Nam</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink1" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Momentum Indicators
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Relative Strength Index (RSI)</a>
            <a class="dropdown-item" href="#">Moving Average Convergence Divergence (MACD)</a>
            <a class="dropdown-item" href="#">Stochastic Oscillator</a>
            <a class="dropdown-item" href="#">Commodity Channel Index (CCI)</a>
            <a class="dropdown-item" href="#">Rate of Change (ROC)</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink2" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Volume Indicators
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">On-Balance Volume (OBV)</a>
            <a class="dropdown-item" href="#">Accumulation/Distribution Line</a>
            <a class="dropdown-item" href="#">Volume Oscillator</a>
            <a class="dropdown-item" href="#">Chaikin Money Flow (CMF)</a>
            <a class="dropdown-item" href="#">Volume Rate of Change</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink3" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Volatility Indicators
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Average True Range (ATR)</a>
            <a class="dropdown-item" href="#">Bollinger Bands</a>
            <a class="dropdown-item" href="#">Keltner Channels</a>
            <a class="dropdown-item" href="#">Donchian Channels</a>
            <a class="dropdown-item" href="#">Volatility Chaikin</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink4" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Cycle Indicators
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <a class="dropdown-item" href="#">Detrended Price Oscillator (DPO)</a>
            <a class="dropdown-item" href="#">Schaff Trend Cycle</a>
            <a class="dropdown-item" href="#">Elliott Wave Theory</a>
            <a class="dropdown-item" href="#">Fibonacci Time Zones</a>
            <a class="dropdown-item" href="#">Gann Fan</a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
  <v-select multiple :options="tagOptions" v-model="selectedTags" placeholder="Chọn mã CP"></v-select>
  <div>
    <button class="btn-sm m-1" @click="vn30">VN30</button>
    <button class="btn-sm m-1" @click="vn100">VN100</button>
    <button class="btn-sm m-1" @click="vnDiamond">VNDIAMOND</button>
    <button class="btn-sm m-1" @click="hnx30">HNX30</button>
    <button class="btn-sm m-1" @click="clearSelectedTags">Toàn thị trường</button>
  </div>
  <p>Cập nhật lần cuối: 2024-04-19T09:30:38.506Z</p>

  <canvas id="myScatterChart"></canvas>
  <ul>
    <li>
      Đường kẻ đứt màu đỏ thể hiện giá trị của mã cổ phiếu giảm so với ngày trước đó, đường kẻ đứt màu xanh thể
      hiện giá trị tăng so với ngày trước đó.
    </li>
    <li>
      Chấm màu đỏ thể hiện giá trị phân tích kỹ thuật của mã cổ phiếu hiện tại
    </li>
  </ul>
</div>

<script>
  const footer = (context) => {
    let sum = 0;

    context.forEach(function (tooltipItem) {
      sum += tooltipItem.parsed.y;
    });
    return 'Sum: ' + sum;
  };
  Vue.component('v-select', VueSelect.VueSelect);

  new Vue({
    el: '#app',
    data: {
      originalData: [{"name":"VCB","value":"38.08","change":"2.38","open":91.2,"high":92.1,"low":91.2,"close":91.4,"timestamp":1713312000},{"name":"BID","value":"43.28","change":"0.00","open":50.9,"high":51,"low":50.3,"close":50.3,"timestamp":1713312000},{"name":"GAS","value":"32.19","change":"-0.98","open":76.2,"high":76.5,"low":75.6,"close":75.7,"timestamp":1713312000},{"name":"VHM","value":"45.43","change":"-0.81","open":43,"high":43.05,"low":41.95,"close":42.6,"timestamp":1713312000},{"name":"CTG","value":"44.78","change":"-3.47","open":34.25,"high":34.25,"low":33.5,"close":33.6,"timestamp":1713312000},{"name":"VIC","value":"37.94","change":"-7.34","open":46.5,"high":46.5,"low":45,"close":45.3,"timestamp":1713312000},{"name":"ACV","value":"58.28","change":"-0.52","open":86,"high":87,"low":86,"close":86.4,"timestamp":1713312000},{"name":"HPG","value":"32.66","change":"0.00","open":28.5,"high":28.55,"low":28.35,"close":28.35,"timestamp":1713312000},{"name":"TCB","value":"55.96","change":"0.23","open":45.5,"high":45.6,"low":45.05,"close":45.55,"timestamp":1713312000},{"name":"VPB","value":"43.05","change":"0.91","open":18.95,"high":19.05,"low":18.75,"close":18.8,"timestamp":1713312000},{"name":"FPT","value":"48.12","change":"-1.59","open":113.1,"high":113.1,"low":112.3,"close":112.5,"timestamp":1713312000},{"name":"VNM","value":"33.37","change":"6.07","open":64.4,"high":64.9,"low":64.3,"close":64.7,"timestamp":1713312000},{"name":"GVR","value":"42.02","change":"-1.81","open":30.7,"high":30.7,"low":29.9,"close":29.95,"timestamp":1713312000},{"name":"MBB","value":"46.55","change":"-2.55","open":24,"high":24.05,"low":23.6,"close":23.65,"timestamp":1713312000},{"name":"ACB","value":"45.04","change":"-0.72","open":27.2,"high":27.25,"low":27,"close":27.1,"timestamp":1713312000},{"name":"MSN","value":"32.42","change":"3.49","open":66.4,"high":67.3,"low":65.5,"close":66.9,"timestamp":1713312000},{"name":"VGI","value":"63.38","change":"-1.62","open":51.6,"high":53.9,"low":51,"close":51.4,"timestamp":1713312000},{"name":"BCM","value":"19.34","change":"-0.65","open":56.2,"high":56.2,"low":55.1,"close":55.2,"timestamp":1713312000},{"name":"MWG","value":"48.71","change":"-1.86","open":50.4,"high":50.4,"low":49.35,"close":49.5,"timestamp":1713312000},{"name":"SAB","value":"29.18","change":"-4.41","open":54.8,"high":54.9,"low":54,"close":54,"timestamp":1713312000},{"name":"HDB","value":"41.11","change":"-8.98","open":23.55,"high":23.55,"low":22.9,"close":22.9,"timestamp":1713312000},{"name":"BSR","value":"41.99","change":"-4.13","open":19,"high":19.1,"low":18.9,"close":18.9,"timestamp":1713312000},{"name":"VIB","value":"41.62","change":"3.50","open":22.3,"high":22.35,"low":22,"close":22.1,"timestamp":1713312000},{"name":"MCH","value":"58.23","change":"0.00","open":138,"high":138,"low":136,"close":138,"timestamp":1713312000},{"name":"SSI","value":"35.22","change":"-1.59","open":35.45,"high":35.5,"low":34.85,"close":34.9,"timestamp":1713312000},{"name":"VJC","value":"55.06","change":"-10.41","open":106.1,"high":106.1,"low":104.1,"close":104.1,"timestamp":1713312000},{"name":"VRE","value":"31.21","change":"0.52","open":22.4,"high":22.75,"low":22.2,"close":22.25,"timestamp":1713312000},{"name":"STB","value":"29.89","change":"1.19","open":27.6,"high":27.6,"low":27.25,"close":27.4,"timestamp":1713312000},{"name":"SSB","value":"51.65","change":"6.15","open":22.2,"high":22.6,"low":22.15,"close":22.3,"timestamp":1713312000},{"name":"PLX","value":"35.19","change":"-4.29","open":36,"high":36,"low":35.45,"close":35.45,"timestamp":1713312000},{"name":"VEA","value":"36.74","change":"0.00","open":36.1,"high":36.2,"low":36,"close":36.1,"timestamp":1713312000},{"name":"LPB","value":"71.80","change":"0.00","open":19.7,"high":19.7,"low":19.15,"close":19.45,"timestamp":1713312000},{"name":"DGC","value":"43.28","change":"-0.43","open":114.3,"high":114.5,"low":113,"close":113.2,"timestamp":1713312000},{"name":"SHB","value":"50.41","change":"-3.67","open":11.65,"high":11.65,"low":11.35,"close":11.4,"timestamp":1713312000},{"name":"TPB","value":"30.39","change":"-2.88","open":17.7,"high":17.7,"low":17.3,"close":17.35,"timestamp":1713312000},{"name":"NVL","value":"33.98","change":"0.73","open":15.9,"high":16.1,"low":15.7,"close":15.8,"timestamp":1713312000},{"name":"HVN","value":"76.65","change":"0.00","open":16.5,"high":16.5,"low":16.5,"close":16.5,"timestamp":1713312000},{"name":"BVH","value":"27.89","change":"4.59","open":39.45,"high":40,"low":39.35,"close":39.65,"timestamp":1713312000},{"name":"PNJ","value":"43.14","change":"-3.49","open":96.8,"high":96.8,"low":94,"close":94.3,"timestamp":1713312000},{"name":"EIB","value":"31.75","change":"2.65","open":17.2,"high":17.2,"low":17,"close":17.05,"timestamp":1713312000},{"name":"OCB","value":"35.16","change":"3.89","open":13.85,"high":14.05,"low":13.7,"close":13.8,"timestamp":1713312000},{"name":"MSB","value":"30.10","change":"-1.89","open":13.65,"high":13.75,"low":13.45,"close":13.45,"timestamp":1713312000},{"name":"VND","value":"24.26","change":"-1.33","open":20.1,"high":20.25,"low":19.85,"close":19.85,"timestamp":1713312000},{"name":"POW","value":"36.63","change":"5.32","open":10.9,"high":11.1,"low":10.9,"close":11,"timestamp":1713312000},{"name":"KDH","value":"35.91","change":"-0.79","open":34.4,"high":34.4,"low":34,"close":34.1,"timestamp":1713312000},{"name":"REE","value":"40.23","change":"3.34","open":60.8,"high":61.2,"low":60.4,"close":60.8,"timestamp":1713312000},{"name":"VGC","value":"35.26","change":"3.83","open":52.2,"high":52.5,"low":51.5,"close":52.4,"timestamp":1713312000},{"name":"KBC","value":"33.22","change":"-0.83","open":30.95,"high":30.95,"low":30.35,"close":30.4,"timestamp":1713312000},{"name":"SSH","value":"56.74","change":"4.15","open":66.5,"high":67,"low":66.5,"close":66.7,"timestamp":1713312000},{"name":"GMD","value":"57.89","change":"7.94","open":79,"high":81.3,"low":78.9,"close":80.9,"timestamp":1713312000},{"name":"PGV","value":"26.87","change":"7.32","open":20.8,"high":20.85,"low":20.7,"close":20.7,"timestamp":1713312000},{"name":"VEF","value":"46.29","change":"-3.96","open":193,"high":193,"low":185.7,"close":185.7,"timestamp":1713312000},{"name":"HCM","value":"37.86","change":"-3.00","open":27.6,"high":27.6,"low":26.85,"close":26.9,"timestamp":1713312000},{"name":"VNZ","value":"32.75","change":"2.23","open":483.3,"high":483.3,"low":483.3,"close":483.3,"timestamp":1713312000},{"name":"FOX","value":"36.25","change":"1.23","open":55.8,"high":56.5,"low":55.8,"close":55.8,"timestamp":1713312000},{"name":"MVN","value":"44.48","change":"-6.62","open":17.6,"high":17.6,"low":16.5,"close":16.5,"timestamp":1713312000},{"name":"PVS","value":"45.43","change":"-3.33","open":40,"high":40,"low":39.1,"close":39.2,"timestamp":1713312000},{"name":"GEX","value":"28.51","change":"-0.73","open":21.05,"high":21.15,"low":20.6,"close":20.7,"timestamp":1713312000},{"name":"DIG","value":"42.28","change":"-1.73","open":30.3,"high":30.45,"low":29.3,"close":29.75,"timestamp":1713312000},{"name":"VCI","value":"36.23","change":"-1.70","open":48.4,"high":48.4,"low":47,"close":47.3,"timestamp":1713312000},{"name":"IDC","value":"34.20","change":"3.27","open":54.5,"high":55.5,"low":54.2,"close":54.9,"timestamp":1713312000},{"name":"FRT","value":"44.20","change":"-1.25","open":140,"high":141.4,"low":139,"close":140,"timestamp":1713312000},{"name":"PVD","value":"39.02","change":"-3.05","open":31,"high":31,"low":30.15,"close":30.25,"timestamp":1713312000},{"name":"MSR","value":"30.14","change":"-0.86","open":13.9,"high":13.9,"low":13.6,"close":13.6,"timestamp":1713312000},{"name":"QNS","value":"31.96","change":"-0.43","open":46.3,"high":46.4,"low":45.9,"close":46,"timestamp":1713312000},{"name":"DCM","value":"33.10","change":"-0.48","open":31.95,"high":32,"low":31.55,"close":31.55,"timestamp":1713312000},{"name":"DNH","value":"57.47","change":"0.00","open":60.2,"high":60.2,"low":60.2,"close":60.2,"timestamp":1713312000},{"name":"KDC","value":"38.66","change":"-10.46","open":62.3,"high":62.6,"low":61.7,"close":62,"timestamp":1713312000},{"name":"HUT","value":"27.37","change":"-2.88","open":17.2,"high":17.3,"low":16.7,"close":16.8,"timestamp":1713312000},{"name":"VHC","value":"37.79","change":"1.30","open":70.4,"high":70.9,"low":69.8,"close":70.4,"timestamp":1713312000},{"name":"NLG","value":"28.42","change":"-2.30","open":39.4,"high":39.4,"low":38.55,"close":38.65,"timestamp":1713312000},{"name":"SHS","value":"45.67","change":"-1.01","open":19.1,"high":19.6,"low":19.1,"close":19.2,"timestamp":1713312000},{"name":"PDR","value":"35.41","change":"-2.12","open":29.2,"high":29.25,"low":28.5,"close":28.75,"timestamp":1713312000},{"name":"DHG","value":"43.02","change":"-7.47","open":112.2,"high":112.2,"low":112,"close":112.1,"timestamp":1713312000},{"name":"IDP","value":"50.06","change":"0.00","open":249,"high":249,"low":249,"close":249,"timestamp":1713312000},{"name":"DXG","value":"33.14","change":"-1.29","open":17.8,"high":17.85,"low":17.4,"close":17.45,"timestamp":1713312000},{"name":"CTR","value":"43.82","change":"-1.04","open":120,"high":120.8,"low":118,"close":118.6,"timestamp":1713312000},{"name":"NAB","value":"37.36","change":"0.00","open":15.8,"high":15.8,"low":15.6,"close":15.7,"timestamp":1713312000},{"name":"HSG","value":"29.82","change":"-0.30","open":21,"high":21,"low":20.6,"close":20.7,"timestamp":1713312000},{"name":"VPI","value":"35.00","change":"2.43","open":55.8,"high":55.9,"low":55.5,"close":55.9,"timestamp":1713312000},{"name":"DPM","value":"33.33","change":"0.00","open":33,"high":33.15,"low":32.75,"close":32.75,"timestamp":1713312000},{"name":"THD","value":"42.57","change":"0.00","open":34.9,"high":34.9,"low":34.8,"close":34.8,"timestamp":1713312000},{"name":"VCG","value":"20.74","change":"-0.44","open":22.2,"high":22.25,"low":21.85,"close":21.85,"timestamp":1713312000},{"name":"VIX","value":"32.16","change":"-1.97","open":18,"high":18.05,"low":17.4,"close":17.55,"timestamp":1713312000},{"name":"MBS","value":"45.54","change":"-2.25","open":28.6,"high":28.7,"low":28,"close":28.2,"timestamp":1713312000},{"name":"FTS","value":"41.20","change":"-1.35","open":58,"high":58,"low":56.1,"close":56.5,"timestamp":1713312000},{"name":"BSI","value":"38.08","change":"-1.57","open":58.2,"high":58.2,"low":55.6,"close":56.4,"timestamp":1713312000},{"name":"SIP","value":"38.23","change":"1.91","open":79.5,"high":80,"low":78.1,"close":78.9,"timestamp":1713312000},{"name":"KSF","value":"52.80","change":"4.54","open":40.7,"high":40.8,"low":40.7,"close":40.7,"timestamp":1713312000},{"name":"CEO","value":"26.65","change":"0.00","open":19.8,"high":20.1,"low":19.6,"close":19.8,"timestamp":1713312000},{"name":"PVI","value":"41.11","change":"-1.83","open":48,"high":48,"low":47.8,"close":47.8,"timestamp":1713312000},{"name":"OIL","value":"27.07","change":"0.00","open":9.6,"high":9.7,"low":9.5,"close":9.6,"timestamp":1713312000},{"name":"VSH","value":"47.34","change":"4.27","open":48.35,"high":48.35,"low":48.35,"close":48.35,"timestamp":1713312000},{"name":"LGC","value":"52.76","change":"0.00","open":59.4,"high":59.4,"low":59.4,"close":59.4,"timestamp":1713312000},{"name":"BAB","value":"43.46","change":"4.92","open":12.3,"high":12.4,"low":12.3,"close":12.3,"timestamp":1713312000},{"name":"TCH","value":"51.67","change":"-3.11","open":15.95,"high":15.95,"low":15.4,"close":15.55,"timestamp":1713312000},{"name":"VCS","value":"35.47","change":"0.80","open":61.9,"high":62.9,"low":61.9,"close":62,"timestamp":1713312000},{"name":"EVF","value":"27.75","change":"3.87","open":13.8,"high":13.8,"low":13.5,"close":13.65,"timestamp":1713312000},{"name":"DGW","value":"34.83","change":"-3.04","open":59.3,"high":59.3,"low":57.5,"close":57.7,"timestamp":1713312000},{"name":"MML","value":"43.13","change":"10.43","open":26.5,"high":26.5,"low":26.5,"close":26.5,"timestamp":1713312000},{"name":"SNZ","value":"44.62","change":"4.85","open":30.2,"high":32.8,"low":30,"close":32.6,"timestamp":1713312000},{"name":"VSF","value":"39.01","change":"-7.00","open":32,"high":33,"low":32,"close":32.1,"timestamp":1713312000},{"name":"BMP","value":"49.71","change":"-7.02","open":118.4,"high":118.4,"low":113.1,"close":113.2,"timestamp":1713312000},{"name":"ABB","value":"37.35","change":"-3.92","open":7.8,"high":7.9,"low":7.7,"close":7.8,"timestamp":1713312000},{"name":"SBT","value":"28.31","change":"-2.24","open":11.7,"high":11.7,"low":11.3,"close":11.3,"timestamp":1713312000},{"name":"TMS","value":"59.24","change":"-7.56","open":57.4,"high":58,"low":54.7,"close":57,"timestamp":1713312000},{"name":"PVT","value":"33.70","change":"-1.72","open":25.2,"high":25.3,"low":24.5,"close":24.7,"timestamp":1713312000},{"name":"CMG","value":"52.16","change":"-7.70","open":45.8,"high":46.3,"low":43.9,"close":44.15,"timestamp":1713312000},{"name":"XDC","value":"28.36","change":"-3.04","open":76.4,"high":76.4,"low":65,"close":65,"timestamp":1703721600},{"name":"BHN","value":"44.07","change":"-6.18","open":39,"high":39,"low":38.3,"close":38.3,"timestamp":1713312000},{"name":"PC1","value":"33.55","change":"-3.94","open":26.9,"high":26.9,"low":25.95,"close":25.95,"timestamp":1713312000},{"name":"HDG","value":"30.35","change":"-2.68","open":26.55,"high":26.7,"low":26,"close":26,"timestamp":1713312000},{"name":"PGB","value":"41.06","change":"-5.12","open":18.4,"high":19,"low":18.2,"close":18.6,"timestamp":1713312000},{"name":"HAG","value":"37.97","change":"-8.37","open":12.6,"high":12.65,"low":11.85,"close":11.85,"timestamp":1713312000},{"name":"BWE","value":"30.18","change":"-3.29","open":41.9,"high":42,"low":40.75,"close":41.55,"timestamp":1713312000},{"name":"KOS","value":"34.12","change":"0.00","open":37.4,"high":37.4,"low":36,"close":37.4,"timestamp":1713312000},{"name":"PHR","value":"30.47","change":"-4.14","open":56.7,"high":56.7,"low":54.3,"close":54.3,"timestamp":1713312000},{"name":"SJS","value":"37.91","change":"-1.10","open":68.8,"high":69.9,"low":67.5,"close":69.4,"timestamp":1713312000},{"name":"PHP","value":"33.55","change":"-2.35","open":21.8,"high":21.8,"low":19.1,"close":21.1,"timestamp":1713312000},{"name":"GEE","value":"44.99","change":"-9.11","open":29.3,"high":29.3,"low":29.3,"close":29.3,"timestamp":1713312000},{"name":"DTK","value":"43.48","change":"0.00","open":10.5,"high":10.8,"low":10.5,"close":10.8,"timestamp":1713312000},{"name":"QTP","value":"48.74","change":"2.95","open":15.5,"high":15.6,"low":15.3,"close":15.4,"timestamp":1713312000},{"name":"SCS","value":"56.93","change":"-2.98","open":78,"high":78.9,"low":77.7,"close":78.3,"timestamp":1713312000},{"name":"DBC","value":"32.28","change":"2.18","open":27.7,"high":28.1,"low":27.35,"close":27.65,"timestamp":1713312000},{"name":"SZC","value":"37.64","change":"4.54","open":38.6,"high":40.1,"low":38.2,"close":39.2,"timestamp":1713312000},{"name":"MPC","value":"18.82","change":"-2.02","open":16.1,"high":16.4,"low":15.9,"close":16,"timestamp":1713312000},{"name":"HND","value":"58.40","change":"11.66","open":15.3,"high":15.3,"low":14.3,"close":14.4,"timestamp":1713312000},{"name":"CTD","value":"32.08","change":"-4.12","open":66.4,"high":66.4,"low":64,"close":64,"timestamp":1713312000},{"name":"VGT","value":"32.04","change":"-6.48","open":11.9,"high":11.9,"low":11.6,"close":11.7,"timestamp":1713312000},{"name":"NKG","value":"35.82","change":"-3.81","open":23.8,"high":24.1,"low":23,"close":23,"timestamp":1713312000},{"name":"NT2","value":"27.44","change":"0.80","open":22,"high":22,"low":21.65,"close":21.65,"timestamp":1713312000},{"name":"SJG","value":"42.92","change":"0.00","open":13,"high":13,"low":13,"close":13,"timestamp":1713312000},{"name":"ACG","value":"42.11","change":"7.51","open":38.7,"high":39.5,"low":38.5,"close":39.2,"timestamp":1713312000},{"name":"HHV","value":"19.54","change":"-2.01","open":13.55,"high":13.7,"low":13.15,"close":13.15,"timestamp":1713312000},{"name":"CC1","value":"31.17","change":"2.85","open":13.5,"high":13.7,"low":13.5,"close":13.5,"timestamp":1713312000},{"name":"VCF","value":"49.88","change":"0.63","open":215.3,"high":227.9,"low":215.2,"close":215.8,"timestamp":1713312000},{"name":"VIF","value":"54.04","change":"3.63","open":16.8,"high":16.9,"low":16.3,"close":16.9,"timestamp":1713312000},{"name":"VSC","value":"31.78","change":"-1.20","open":20.45,"high":20.5,"low":20,"close":20,"timestamp":1713312000},{"name":"CII","value":"22.10","change":"-3.77","open":17,"high":17.1,"low":16.35,"close":16.35,"timestamp":1713312000},{"name":"VBB","value":"35.07","change":"-6.24","open":9.9,"high":9.9,"low":9.7,"close":9.7,"timestamp":1713312000},{"name":"NVB","value":"21.26","change":"-2.35","open":9.5,"high":9.9,"low":9.3,"close":9.3,"timestamp":1713312000},{"name":"KSV","value":"47.12","change":"9.56","open":28.2,"high":28.2,"low":28.1,"close":28.1,"timestamp":1713312000},{"name":"BVB","value":"45.62","change":"-4.17","open":10.8,"high":11.1,"low":10.6,"close":10.7,"timestamp":1713312000},{"name":"CTS","value":"50.35","change":"-8.14","open":40.6,"high":40.6,"low":37.45,"close":37.45,"timestamp":1713312000},{"name":"IJC","value":"33.68","change":"-3.91","open":14.25,"high":14.25,"low":13.55,"close":13.55,"timestamp":1713312000},{"name":"SCG","value":"41.40","change":"-2.52","open":65.2,"high":65.5,"low":64.9,"close":64.9,"timestamp":1713312000},{"name":"NTP","value":"27.14","change":"-2.22","open":39.7,"high":39.7,"low":39.1,"close":39.1,"timestamp":1713312000},{"name":"SBH","value":"47.69","change":"0.00","open":60.1,"high":60.1,"low":60.1,"close":60.1,"timestamp":1713312000},{"name":"TID","value":"35.48","change":"1.56","open":22.7,"high":22.7,"low":22.6,"close":22.6,"timestamp":1713312000},{"name":"ITA","value":"16.94","change":"-0.27","open":5.1,"high":5.14,"low":5.01,"close":5.01,"timestamp":1713312000},{"name":"KLB","value":"46.25","change":"13.07","open":11.1,"high":11.7,"low":11.1,"close":11.7,"timestamp":1713312000},{"name":"VTP","value":"33.72","change":"-4.72","open":71.8,"high":72,"low":68.2,"close":68.2,"timestamp":1713312000},{"name":"TVN","value":"29.41","change":"-5.87","open":5.8,"high":5.9,"low":5.7,"close":5.7,"timestamp":1713312000},{"name":"DVN","value":"40.48","change":"0.00","open":18.2,"high":18.3,"low":18.2,"close":18.2,"timestamp":1713312000},{"name":"PAN","value":"31.73","change":"-0.28","open":21.7,"high":21.85,"low":21.35,"close":21.55,"timestamp":1713312000},{"name":"TMP","value":"24.52","change":"0.00","open":65.1,"high":68,"low":65.1,"close":68,"timestamp":1713312000},{"name":"ORS","value":"26.25","change":"-4.69","open":15.1,"high":15.1,"low":14.2,"close":14.2,"timestamp":1713312000},{"name":"HNG","value":"30.41","change":"-0.51","open":3.93,"high":3.99,"low":3.91,"close":3.91,"timestamp":1713312000},{"name":"STG","value":"44.90","change":"0.00","open":46.85,"high":46.85,"low":46.85,"close":46.85,"timestamp":1713312000},{"name":"HT1","value":"20.32","change":"-1.51","open":11.9,"high":11.9,"low":11.4,"close":11.65,"timestamp":1713312000},{"name":"ANV","value":"27.18","change":"-1.89","open":30.45,"high":30.45,"low":29.55,"close":29.55,"timestamp":1713312000},{"name":"C4G","value":"20.32","change":"-2.93","open":10,"high":10.2,"low":9.7,"close":9.8,"timestamp":1713312000},{"name":"TDM","value":"57.75","change":"4.34","open":45.3,"high":46.5,"low":45.3,"close":46.4,"timestamp":1713312000},{"name":"SGB","value":"52.28","change":"0.00","open":14.5,"high":14.8,"low":14.4,"close":14.5,"timestamp":1713312000},{"name":"IMP","value":"68.98","change":"7.30","open":71.4,"high":71.4,"low":70,"close":71,"timestamp":1713312000},{"name":"VCR","value":"52.21","change":"7.26","open":23.4,"high":24,"low":23.4,"close":24,"timestamp":1713312000},{"name":"BCG","value":"26.24","change":"-2.07","open":7.91,"high":7.98,"low":7.68,"close":7.7,"timestamp":1713312000},{"name":"GEG","value":"36.70","change":"-0.81","open":12.85,"high":13.05,"low":12.7,"close":12.8,"timestamp":1713312000},{"name":"DSC","value":"33.26","change":"-6.09","open":23.4,"high":23.4,"low":22.1,"close":22.3,"timestamp":1713312000},{"name":"DXS","value":"31.59","change":"-1.51","open":6.82,"high":6.88,"low":6.61,"close":6.65,"timestamp":1713312000},{"name":"AGR","value":"43.34","change":"-5.55","open":20.7,"high":20.9,"low":19.65,"close":19.65,"timestamp":1713312000},{"name":"HDC","value":"38.45","change":"-1.83","open":31.25,"high":31.4,"low":30.5,"close":30.8,"timestamp":1713312000},{"name":"VAB","value":"55.37","change":"-2.12","open":8.9,"high":9.1,"low":8.7,"close":8.8,"timestamp":1713312000},{"name":"CAV","value":"30.04","change":"1.27","open":69.5,"high":69.6,"low":69.5,"close":69.5,"timestamp":1713312000},{"name":"ASM","value":"36.57","change":"-3.24","open":11.5,"high":11.5,"low":10.9,"close":10.95,"timestamp":1713312000},{"name":"HAH","value":"31.52","change":"0.78","open":38.4,"high":38.9,"low":38.15,"close":38.35,"timestamp":1713312000},{"name":"PPC","value":"46.78","change":"19.13","open":13.8,"high":13.8,"low":13.45,"close":13.45,"timestamp":1713312000},{"name":"CHP","value":"54.19","change":"-8.11","open":29.5,"high":29.6,"low":29.5,"close":29.6,"timestamp":1713312000},{"name":"PTB","value":"44.55","change":"-4.40","open":63.5,"high":63.5,"low":61.2,"close":61.2,"timestamp":1713312000},{"name":"PDN","value":"52.64","change":"0.26","open":114.5,"high":114.6,"low":114.5,"close":114.6,"timestamp":1713312000},{"name":"MCM","value":"27.41","change":"-1.28","open":39.2,"high":39.7,"low":39,"close":39,"timestamp":1713312000},{"name":"AAA","value":"29.96","change":"0.00","open":9.95,"high":10.2,"low":9.82,"close":9.9,"timestamp":1713312000},{"name":"NTC","value":"41.53","change":"-2.01","open":204.5,"high":204.5,"low":200,"close":200,"timestamp":1713312000},{"name":"DBD","value":"29.06","change":"0.00","open":52.9,"high":53.1,"low":52.7,"close":52.9,"timestamp":1713312000},{"name":"TCM","value":"23.26","change":"-1.21","open":41.6,"high":41.6,"low":40.7,"close":41.35,"timestamp":1713312000},{"name":"VNR","value":"34.54","change":"-3.64","open":23.4,"high":23.5,"low":23.1,"close":23.1,"timestamp":1713312000},{"name":"CRE","value":"38.96","change":"-4.29","open":8.48,"high":8.55,"low":8.2,"close":8.23,"timestamp":1713312000},{"name":"HNA","value":"50.20","change":"1.16","open":21,"high":22.5,"low":21,"close":22.45,"timestamp":1713312000},{"name":"TLG","value":"39.51","change":"4.89","open":47.2,"high":48.2,"low":47.05,"close":47.55,"timestamp":1713312000},{"name":"PRT","value":"43.18","change":"0.00","open":11.4,"high":11.4,"low":11,"close":11,"timestamp":1713312000},{"name":"SGP","value":"35.12","change":"-1.20","open":18.9,"high":19,"low":18.6,"close":18.8,"timestamp":1713312000},{"name":"PGD","value":"47.60","change":"-0.45","open":35.15,"high":37.2,"low":35.15,"close":37.2,"timestamp":1713312000},{"name":"VLC","value":"29.97","change":"-1.86","open":16.5,"high":16.5,"low":15.8,"close":15.8,"timestamp":1713312000},{"name":"AVC","value":"47.43","change":"1.02","open":58.5,"high":58.5,"low":58.2,"close":58.2,"timestamp":1713312000},{"name":"DRC","value":"39.11","change":"-1.09","open":29.8,"high":30.1,"low":29.2,"close":29.35,"timestamp":1713312000},{"name":"TVS","value":"28.49","change":"-1.35","open":22.1,"high":22.4,"low":21.85,"close":21.9,"timestamp":1713312000},{"name":"DPR","value":"38.80","change":"-5.20","open":38.05,"high":38.15,"low":36.5,"close":36.5,"timestamp":1713312000},{"name":"DNW","value":"50.13","change":"16.62","open":29,"high":29,"low":29,"close":29,"timestamp":1713312000},{"name":"TRA","value":"57.80","change":"13.43","open":85.8,"high":85.8,"low":80.2,"close":84.2,"timestamp":1713312000},{"name":"MSH","value":"44.68","change":"-2.52","open":42.7,"high":42.7,"low":41.8,"close":42.1,"timestamp":1713312000},{"name":"BIC","value":"45.89","change":"-7.32","open":12.401,"high":12.477,"low":12.026,"close":12.026,"timestamp":1430870400},{"name":"IPA","value":"87.86","change":"0.00","open":7.917,"high":7.917,"low":7.917,"close":7.917,"timestamp":1577318400},{"name":"SHP","value":"46.52","change":"0.00","open":9.158,"high":9.158,"low":9.158,"close":9.158,"timestamp":1456444800},{"name":"VC3","value":"59.69","change":"6.95","open":6.479,"high":6.744,"low":6.347,"close":6.744,"timestamp":1453939200},{"name":"SCR","value":"26.44","change":"-3.80","open":4.374,"high":4.441,"low":4.245,"close":4.311,"timestamp":1430870400},{"name":"VPD","value":"53.77","change":"-3.91","open":10.638,"high":10.708,"low":10.496,"close":10.496,"timestamp":1514332800},{"name":"BMI","value":"72.44","change":"0.00","open":7.314,"high":7.397,"low":7.272,"close":7.397,"timestamp":1410825600},{"name":"AGG","value":"54.73","change":"8.70","open":32.436,"high":33.977,"low":32.085,"close":33.347,"timestamp":1637280000},{"name":"TDP","value":"48.03","change":"3.36","open":19.223,"high":19.605,"low":18.842,"close":19.605,"timestamp":1645488000},{"name":"KHG","value":"39.56","change":"-2.02","open":5.55,"high":5.57,"low":5.43,"close":5.49,"timestamp":1699315200},{"name":"CSV","value":"47.57","change":"8.80","open":14.58,"high":15.138,"low":14.58,"close":15.027,"timestamp":1481155200},{"name":"PTI","value":"68.23","change":"10.74","open":7.497,"high":7.99,"low":7.497,"close":7.99,"timestamp":1407974400},{"name":"CDN","value":"52.81","change":"0.00","open":13.05,"high":13.05,"low":13.05,"close":13.05,"timestamp":1512086400},{"name":"PGI","value":"63.20","change":"0.00","open":4.751,"high":4.751,"low":4.751,"close":4.751,"timestamp":1411084800},{"name":"BVS","value":"59.49","change":"-11.73","open":36.9,"high":37.3,"low":34.2,"close":34.9,"timestamp":1712534400},{"name":"PLC","value":"26.31","change":"-5.62","open":18.422,"high":18.539,"low":17.721,"close":17.896,"timestamp":1459468800},{"name":"VFG","value":"58.65","change":"0.00","open":8.199,"high":8.199,"low":8.063,"close":8.179,"timestamp":1412553600},{"name":"LCG","value":"74.09","change":"7.03","open":4.503,"high":4.687,"low":4.503,"close":4.687,"timestamp":1412553600},{"name":"TNG","value":"62.56","change":"2.66","open":6.721,"high":6.871,"low":6.62,"close":6.746,"timestamp":1442793600},{"name":"FCN","value":"61.88","change":"-2.18","open":14.861,"high":14.974,"low":14.692,"close":14.748,"timestamp":1410480000},{"name":"TIG","value":"40.11","change":"0.00","open":3.579,"high":3.619,"low":3.54,"close":3.579,"timestamp":1454025600},{"name":"TBC","value":"54.55","change":"4.98","open":7.261,"high":7.303,"low":7.094,"close":7.303,"timestamp":1384300800},{"name":"TV2","value":"69.05","change":"-0.00","open":1.276,"high":1.276,"low":1.276,"close":1.276,"timestamp":1410480000},{"name":"SAM","value":"57.79","change":"-1.81","open":5.22,"high":5.263,"low":5.133,"close":5.133,"timestamp":1409875200},{"name":"SHI","value":"57.57","change":"-8.39","open":1.776,"high":1.811,"low":1.776,"close":1.776,"timestamp":1385942400},{"name":"TNH","value":"24.86","change":"-10.15","open":22.558,"high":23.423,"low":22.125,"close":22.125,"timestamp":1664755200},{"name":"GIL","value":"53.02","change":"0.00","open":6.3,"high":6.3,"low":6.277,"close":6.3,"timestamp":1413763200},{"name":"LAS","value":"57.11","change":"1.45","open":13.561,"high":13.608,"low":13.561,"close":13.608,"timestamp":1456444800},{"name":"DNP","value":"71.25","change":"-7.82","open":9.203,"high":9.263,"low":8.874,"close":8.874,"timestamp":1458777600},{"name":"NCT","value":"60.64","change":"1.42","open":44.725,"high":44.788,"low":44.536,"close":44.662,"timestamp":1562544000},{"name":"DMC","value":"66.63","change":"4.19","open":25.4,"high":25.4,"low":24.952,"close":25.4,"timestamp":1409875200},{"name":"MVB","value":"42.68","change":"-0.00","open":4.669,"high":4.669,"low":4.669,"close":4.669,"timestamp":1572566400},{"name":"DHT","value":"48.73","change":"2.02","open":2.288,"high":2.31,"low":2.274,"close":2.31,"timestamp":1424736000},{"name":"APH","value":"55.72","change":"-12.01","open":29.9,"high":30.3,"low":28.4,"close":28.6,"timestamp":1648598400},{"name":"SBA","value":"48.42","change":"-2.29","open":5.722,"high":5.722,"low":5.674,"close":5.722,"timestamp":1416787200},{"name":"ASG","value":"48.21","change":"-4.31","open":26.364,"high":26.364,"low":25.5,"close":25.5,"timestamp":1659571200},{"name":"PRE","value":"49.99","change":"0.00","open":16.048,"high":16.142,"low":15.955,"close":16.142,"timestamp":1694649600},{"name":"NET","value":"51.83","change":"1.45","open":18.199,"high":18.393,"low":18.199,"close":18.315,"timestamp":1463356800},{"name":"ELC","value":"39.81","change":"-3.30","open":5.823,"high":5.943,"low":5.743,"close":5.743,"timestamp":1409184000},{"name":"SVC","value":"63.25","change":"2.16","open":10.049,"high":10.389,"low":10.049,"close":10.389,"timestamp":1447372800}],
      selectedTags: JSON.parse(localStorage.getItem('selectedTags')) || [],
      lastUpdated: '',
      myScatterChart: null
    },
    computed: {
      tagOptions() {
        return this.originalData.map(item => item.name);
      },
      filteredData() {
        return this.selectedTags.length > 0
               ? this.originalData.filter(item => this.selectedTags.includes(item.name))
               : this.originalData;
      }
    },
    methods: {
      createScatterData(data) {
        return {
          datasets: [
            {
              label: 'Symbol',
              data: data.map((item, index) => ({x: index + 1, y: item.value})),
              backgroundColor: 'rgba(255, 99, 132, 1)',
              pointRadius: 6,
            },
            ...data.map((item, index) => ({
              data: [
                {x: index + 1, y: item.value - item.change},
                {x: index + 1, y: item.value}
              ],
              borderColor: item.change >= 0 ? 'green' : 'red',
              borderWidth: 2,
              showLine: true,
              fill: false,
              pointRadius: 0,
              tension: 0,
              borderDash: [5, 5]
            }))
          ]
        };
      },
      updateChart() {
        this.myScatterChart.data = this.createScatterData(this.filteredData);
        this.myScatterChart.update();
        this.lastUpdated = new Date().toLocaleString();
      },
      saveSelectedTags() {
        localStorage.setItem('selectedTags', JSON.stringify(this.selectedTags));
      },
      clearSelectedTags() {
        this.selectedTags = [];
      },
      vn30() {
        this.selectedTags =
          ['ACB', 'BCM', 'BID', 'BVH', 'CTG', 'FPT', 'GAS', 'GVR', 'HDB', 'HPG', 'MBB', 'MSN', 'MWG', 'PLX',
           'POW', 'SAB', 'SHB', 'SSB', 'SSI', 'STB', 'TCB', 'TPB', 'VCB', 'VHM', 'VIB', 'VIC', 'VJC', 'VNM',
           'VPB', 'VRE']
      },
      vn100() {
        this.selectedTags =
          ['AAA', 'ACB', 'AGG', 'ANV', 'ASM', 'BCG', 'BCM', 'BID', 'BMP', 'BSI', 'BVH', 'BWE', 'CII', 'CMG',
           'CRE', 'CTD', 'CTG', 'CTR', 'DBC', 'DCM', 'DGC', 'DGW', 'DHC', 'DIG', 'DPM', 'DXG', 'DXS', 'EIB',
           'EVF', 'FPT', 'FRT', 'FTS', 'GAS', 'GEX', 'GMD', 'GVR', 'HAG', 'HCM', 'HDB', 'HDC', 'HDG', 'HHV',
           'HPG', 'HSG', 'HT1', 'IMP', 'KBC', 'KDC', 'KDH', 'KOS', 'LPB', 'MBB', 'MSB', 'MSN', 'MWG', 'NKG',
           'NLG', 'NT2', 'OCB', 'PAN', 'PC1', 'PDR', 'PHR', 'PLX', 'PNJ', 'POW', 'PPC', 'PTB', 'PVD', 'PVT',
           'REE', 'SAB', 'SBT', 'SCS', 'SHB', 'SJS', 'SSB', 'SSI', 'STB', 'SZC', 'TCB', 'TCH', 'TLG', 'TPB',
           'VCB', 'VCG', 'VCI', 'VGC', 'VHC', 'VHM', 'VIB', 'VIC', 'VIX', 'VJC', 'VND', 'VNM', 'VPB', 'VPI',
           'VRE', 'VSH']
      },
      vnDiamond() {
        this.selectedTags =
          ['ACB', 'BMP', 'CTG', 'FPT', 'GMD', 'HDB', 'KDH', 'MBB', 'MSB', 'NLG', 'OCB', 'PNJ', 'REE', 'TCB',
           'TPB', 'VIB', 'VPB', 'VRE']
      },
      hnx30() {
        this.selectedTags =
          ['BCC', 'BVS', 'CAP', 'CEO', 'DTD', 'DVM', 'DXP', 'HLD', 'HUT', 'IDC', 'L14', 'L18', 'LAS', 'LHC',
           'MBS', 'NBC', 'PLC', 'PSI', 'PVC', 'PVG', 'PVS', 'SHS', 'SLS', 'TDN', 'TIG', 'TNG', 'TVD', 'VC3',
           'VCS', 'VIG']
      }
    },
    watch: {
      selectedTags: {
        handler() {
          this.updateChart();
          this.saveSelectedTags();
        },
        deep: true
      }
    },
    mounted() {
      const ctx = document.getElementById('myScatterChart').getContext('2d');
      const config = {
        type: 'scatter',
        data: this.createScatterData(this.filteredData),
        options: {
          layout: {
            padding: 10
          },
          scales: {
            x: {
              type: 'linear',
              position: 'bottom'
            },
            y: {
              type: 'linear',
              position: 'left',
              // min: -100,
              // max: 100
            },
          },
          plugins: {
            title: {
              display: true,
              text: 'Biểu đồ RSI'
            },
            legend: {
              display: false
            },
            datalabels: {
              anchor: 'end',
              align: 'top',
              offset: 5,
              formatter: function (value, context) {
                const dataIndex = context.dataIndex;
                if (context.datasetIndex === 0 && dataIndex < this.filteredData.length) {
                  return this.filteredData[dataIndex].name;
                } else {
                  return null;
                }
              }.bind(this),
              color: '#444',
              font: {
                weight: 'bold'
              }
            },
            tooltip: {
              callbacks: {
                title: function (context) {
                  let element = this.filteredData[context[0].dataIndex]
                  return `Mã: ${element.name}\nGiá mở cửa: ${element.open}\nGiá cao nhất: ${element.high}\nGiá thấp nhất: ${element.low}\nGiá đóng cửa: ${element.close}`;
                }.bind(this),
                footer: function (context) {
                  let element = this.filteredData[context[0].dataIndex]
                  return `Thời gian: ${new Date(element.timestamp * 1000).toLocaleString()}`
                }.bind(this),
                label: function (context) {
                  return 'RSI: ' + context.parsed.y
                }
              }
            }
          }
        },
        plugins: [ChartDataLabels]
      };
      this.myScatterChart = new Chart(ctx, config);
      this.lastUpdated = new Date().toLocaleString();
    }
  });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>